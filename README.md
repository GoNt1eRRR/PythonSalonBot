# PythonSalonBot #
Telegram-бот для записи клиентов в салон красоты. Бот позволяет пользователям записываться на процедуры, выбирать мастера и удобное время для посещения салона. Также бот напоминает о предстоящей записи через уведомления.

## Функционал
* **Запись на услуги в салоне или к мастеру**: Пользователи могут выбрать салон, мастера и услугу, а затем забронировать удобное время.
* **Выбор мастера**: Возможность выбрать мастера для конкретной процедуры.
* **Уведомления**: Бот отправляет уведомления о записи и напоминает о процедуре спустя заданное время.
* **Гибкость в выборе времени и мастера**: Поддержка выбора доступного времени и мастера для каждой процедуры.
*  **Обратная связь с менеджером**: Возможность связаться с менеджером для уточнений и помощи.
---
## Требования
Для запуска бота на вашем компьютере или сервере необходимо:
 
* Python 3.7+
* Установленные зависимости из `requirements.txt`

---

## Установка
1. Склонируйте репозиторий:

```bash
git clone https://github.com/GoNt1eRRR/PythonSalonBot.git
cd PythonSalonBot
```
2. Создайте виртуальное окружение:

```bash
python3 -m venv env
source venv/bin/activate  # Для Windows: venv\Scripts\activate
```
3. Установите зависимости:
```bash
pip install -r requirements.txt
```
4. Получите токен для бота через [BotFather](https://telegram.me/BotFather).

5. Создайте файл .env в корне проекта и добавьте в него ваш токен:
```text
TG_TOKEN=ваш_токен
```
6. Запустите бота:

```bash
python3 run.py
```

Теперь ваш бот будет запущен и готов к работе!
___
## Структура проекта
* `run.py` — главный файл для запуска бота.
* `app/handlers_start.py` — обработчик команд старта и начальных кнопок.
* `app/handlers_salons.py` — обработчик записей в салоны.
* `app/handlers_master.py` — обработчик записей к мастерам.
* `app/services.py` — вспомогательные функции для работы с API и напоминания.
`requirements.txt` — файл с зависимостями.
___
## Основной функционал

При старте бот отображает клавиатуру с выбором:
* Записаться в Салон
* Записаться к Мастеру
* Связь с Менеджером 
### Запись в салон
* Выберите команду "Записаться в Салон".
* Выберите салон из доступных.
* Выберите услугу, которую хотите получить.
* Выберите доступное время для процедуры.
* Введите ваш номер телефона для подтверждения записи. 
### Запись к мастеру
* Выберите команду "Записаться к Мастеру".
* Выберите мастера из доступных специалистов.
* Выберите услугу, которую хотите получить.
* Выберите доступное время для процедуры.
* Введите ваш номер телефона для подтверждения записи.
### Напоминания
Через 100 дней после процедуры пользователю отправляется напоминание о записи:

```python
async def schedule_followup(bot: Bot, chat_id: int, delay_seconds: int):
    await asyncio.sleep(delay_seconds)
    try:
        await bot.send_message(
            chat_id,
            "Уже прошло 100 дней с момента вашей процедуры!\n"
            "Не желаете, повторить запись?"
        )
    except Exception as e:
        print("Ошибка при отправке follow-up сообщения:", e)
```
### Связь с менеджером
Для связи с менеджером можно использовать кнопку "Связь с Менеджером", которая позволяет пользователю отправить сообщение администраторам или получить помощь.

### Структура обработки запросов
* `Выбор мастера`: Когда пользователь выбирает мастера, бот запрашивает список доступных специалистов с их процедурами и ценами через API.

* `Выбор салона`: Пользователь может выбрать салон, после чего бот предложит доступные процедуры, в том числе с указанием их стоимости.

* `Выбор времени`: После выбора процедуры бот отображает доступные временные слоты. Если слот занят, он не будет отображаться.

* `Подтверждение и запись`: Пользователь вводит свой номер телефона для завершения записи. Бот подтверждает запись и сообщает детали, а также назначает напоминание через 100 дней.